<% if @stage.hosts.empty? %>
  <p>
    No hosts for this stage. A host is a physical host that this stage should deploy to.
    Please add a host.
  </p>
<% else %>
  <table class="sortable">
    <tr>
      <th width="19%">Host</th>
      <th width="20%">Host Alias</th>
      <th width="13%">Role</th>
      <th width="12%">SSH Port</th>
      <th width="35%">Attributes</th>
      <th width="1%">Status</th>
    </tr>
  <% for role in @stage.roles %>
    <tr class="<%= cycle :even, :odd, :name => 'roles' %>">
      <td><%= link_to role.host.name, host_path(role.host) %></td>
      <td><%= role.host.alias_name %></td>
      <td><%= role.name %></td>
      <td><%= role.ssh_port || 'default' %></td>
      <td><%= role.role_attribute_hash.inspect unless role.role_attribute_hash.blank?  %></td>
      <td><%= raw role.status_in_html %></td>
      <td><%= link_to 'Edit', edit_project_stage_role_path(@project, @stage, role) %></td>
      <td><%= link_to 'Delete', project_stage_role_path(@project, @stage, role), :confirm => 'Are you sure?', :method => :delete %></td>
    </tr>
  <% end %>
  </table>
<% end %>